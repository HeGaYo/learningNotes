#文件系统

分类：
## 基本的linux文件系统
- ext 文件系统：
  - 拓展文件系统，为linux提供了一个基本的类Unix文件系统：使用虚拟目录来操作硬件设备，在物理设备上按照定长的块来存储数据。
  - 采用名为索引节点的系统来存储虚拟目录中所存储文件的信息。文件系统通过**索引节点号**而不是通过文件全名及路径来标识文件。
  - 跟踪信息：文件名、文件大小、文件的属性、文件的访问权限、指向存放文件数据的每个硬盘块的指针
  - 文件大小不能超过2GB
- ext2
  - 文件大小可以超过2GB。增加到了2TB
  - 拓展索引节点表的格式来保存系统上每个文件的更多信息，包括创建时间值、修改时间值等。
  - 保存文件时，通过按组分配磁盘块来减轻碎片化
## 日志文件系统
- ext3
  - 给每个存储设备增加了一个日志文件，将准备写入存储设备的数据先写入日志。（ext3用的是有序模式，只有索引节点数据会写入日志，只有数据成功写入后才删除）
  - 无法恢复误删的文件、没有内建的数据压缩功能，不支持加密文件
- ext4
  - 支持数据加密和压缩
  - 支持区段，区段在存储设备上按块分配空间，索引块表只保存起始块的位置
  - 块预分配技术

- Reiser文件系统（只支持回写日志模式，可以在线调整已有文件系统的大小，尾部压缩）
- JFS文件系统（有序日志，基于区段的文件分配）
- XFS文件系统（回写模式的日志）

## 写时复制文件系统（copy-on-write,COW）
兼顾了安全性和性能。如果要修改数据，会使用克隆或者可写快照，修改过得数据不会直接覆盖原数据，而是存放到文件系统的另一个位置。
- ZFS文件系统
- Btrf文件系统（B树文件系统）

## 操作文件系统
- 创建分区
fdisk命令用于帮助管理安装在系统上的任何存储设备的分区。
- 创建文件系统
  ubuntu： mkfs.ext4
  创建文件系统后，下一步就是将它挂载到虚拟目录下的某个挂载点，将数据存储在新文件系统中。

## 使用Linux的LVM
- 作用：允许在Linux上用简单的命令行命令管理一个完整的逻辑卷管理环境。
- 分类： 快照、条带化、镜像
- 使用：
  1. **定义物理卷**：将硬盘上的物理分区转换为linux LVM常用的物理卷区段，用`fdisk`命令，用分区来创建实际的物理卷，用`pvcreate`命令
  2. **创建卷组**：从物理卷中创建一个或多个卷组，一般用`vgcreate`命令
  3. **创建逻辑卷**：用逻辑卷来模拟物理分区，并在其中保存文件系统，用到了`lvcreate`命令
  4. **创建文件系统**：逻辑卷中还没有文件系统，需要进行创建，用到`mkfs.ext4`，创建完成后，用`mount`命令将这个卷挂载到虚拟目录中，要用不同的路径来标识逻辑卷。
  5. **修改LVM**：可以动态修改文件系统
